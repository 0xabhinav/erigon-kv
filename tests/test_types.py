from erigon.proto.types.types_pb2 import H128, H160, H256, H512, H1024, H2048
from erigon.types import decode

import pytest

h128_1 = H128(hi=1, lo=2)
h128_2 = H128(hi=3, lo=4)

h160 = H160(hi=h128_1, lo=5)

h256_1 = H256(hi=h128_1, lo=h128_2)
h256_2 = H256(hi=h128_2, lo=h128_1)

h512_1 = H512(hi=h256_1, lo=h256_2)
h512_2 = H512(hi=h256_2, lo=h256_1)

h1024_1 = H1024(hi=h512_1, lo=h512_2)
h1024_2 = H1024(hi=h512_2, lo=h512_1)

h2048 = H2048(hi=h1024_1, lo=h1024_2)

# fmt: off
@pytest.mark.parametrize(
    ["a", "b"],
    [
        [h128_1, "00000000000000010000000000000002"],
        [h128_2, "00000000000000030000000000000004"],
        [h160, "0000000000000001000000000000000200000005"],
        [h256_1, "0000000000000001000000000000000200000000000000030000000000000004"],
        [h256_1, "0000000000000003000000000000000400000000000000010000000000000002"],
        [h512_1, "00000000000000010000000000000002000000000000000300000000000000040000000000000003000000000000000400000000000000010000000000000002"],
        [h512_2, "00000000000000030000000000000004000000000000000100000000000000020000000000000001000000000000000200000000000000030000000000000004"],
        [h1024_1, "0000000000000001000000000000000200000000000000030000000000000004000000000000000300000000000000040000000000000001000000000000000200000000000000030000000000000004000000000000000100000000000000020000000000000001000000000000000200000000000000030000000000000004"],
        [h1024_2, "0000000000000003000000000000000400000000000000010000000000000002000000000000000100000000000000020000000000000003000000000000000400000000000000010000000000000002000000000000000300000000000000040000000000000003000000000000000400000000000000010000000000000002"],
        [h2048, "00000000000000010000000000000002000000000000000300000000000000040000000000000003000000000000000400000000000000010000000000000002000000000000000300000000000000040000000000000001000000000000000200000000000000010000000000000002000000000000000300000000000000040000000000000003000000000000000400000000000000010000000000000002000000000000000100000000000000020000000000000003000000000000000400000000000000010000000000000002000000000000000300000000000000040000000000000003000000000000000400000000000000010000000000000002"],
    ],
)
def test_decode(a, b):
    assert decode(a) == bytes.fromhex(b)
# fmt: on
